"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Authentication_1=require("../provider/Authentication"),InvalidParameterException_1=require("../provider/exceptions/InvalidParameterException"),ExceptionCollector_1=require("../provider/ExceptionCollector"),AuthRoute=function(){function t(){this.auth=new Authentication_1.Authentication}return t.prototype.addRoutesToGET=function(t){var r=this;if(null==t||null==t)throw new InvalidParameterException_1.InvalidParameterException("Parametro router é 'null'");t.get("/auth",function(t,e){if(r.auth.isConnected()){var o={title:"Protótipo",id:r.auth.getId()};e.render("mainPage",{prop:o})}else e.send("Erro ao connectar.")})},t.prototype.addRoutesToPOST=function(t){var i=this;if(null==t||null==t)throw new InvalidParameterException_1.InvalidParameterException("Parametro router é 'null'");t.post("/auth/byEmail",function(t,e){var o,r=t.body.email,n=t.body.password;try{o=i.auth.authenticateByEmail(r,n)}catch(t){(new ExceptionCollector_1.ExceptionCollector).collect(t)}o?e.redirect("/auth"):e.status(400).send("Não foi possível autenticar usuário.")}),t.post("/auth/byToken",function(t,e){var o,r=t.body.token;try{o=i.auth.authenticateByToken(r)}catch(t){(new ExceptionCollector_1.ExceptionCollector).collect(t)}o?e.redirect("/auth"):e.status(400).send("Não foi possível autenticar usuário.")})},t}();exports.AuthRoute=AuthRoute;