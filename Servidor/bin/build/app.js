"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var express=require("express"),bodyParser=require("body-parser"),cookieParser=require("cookie-parser"),logger=require("morgan"),path=require("path"),helmet=require("helmet"),compression=require("compression"),favicon=require("serve-favicon"),errorHandler=require("errorhandler"),cors=require("cors"),IndexRoute_1=require("./routes/IndexRoute"),AuthRoute_1=require("./routes/AuthRoute"),ExceptionCollector_1=require("./provider/ExceptionCollector"),busboy=require("connect-busboy"),Server=function(){function e(){this.app=express(),this.config(),this.routes(),this.api()}return e.getApplication=function(){return(new e).app},e.prototype.config=function(){this.app.use(bodyParser.urlencoded({extended:!0})),this.app.use(bodyParser.json()),this.app.use(logger("dev")),this.app.use(cookieParser()),this.app.use(busboy()),this.app.use(compression()),this.app.use(helmet()),this.app.use(cors()),this.app.use(favicon(path.join(__dirname,"public","favicon.ico"))),this.app.use(express.static(path.join(__dirname,"public"))),this.app.set("views",path.join(__dirname,"views")),this.app.set("view engine","ejs"),this.app.use(function(e,r,o,t){e.status=404,t(e)}),this.app.use(errorHandler());var e=this.normalizePort(process.env.PORT||"5000");this.app.set("port",e)},e.prototype.routes=function(){var e;e=express.Router();var r=new IndexRoute_1.IndexRoute;try{r.addRoutesToGET(e)}catch(e){(new ExceptionCollector_1.ExceptionCollector).collect(e)}var o=new AuthRoute_1.AuthRoute;try{o.addRoutesToGET(e),o.addRoutesToPOST(e)}catch(e){(new ExceptionCollector_1.ExceptionCollector).collect(e)}this.app.use(e)},e.prototype.api=function(){console.log("API's externas iniciadas")},e.prototype.normalizePort=function(e){var r=parseInt(e,10);return isNaN(r)?e:0<=r?r:void 0},e}();exports.Server=Server;